
//
// @file
// Keyboard Focus Tracking
//
// Structural rules for the current (keyboard) focus tracking.
//

// Load required `Framework SASS` modules.
@use '../../config/variable-overrides';
@use '../../../_sass-framework/helpers/units';

// The following comment starts with a "!". So it will not be removed during
// the (SASS) compilation. It is just to alert project contributors that the
// (CSS) output file can not be modified under any circumstances.
/*! Compiled SASS file | Do NOT modify from here !*/

// This document follows Drupal CSS coding standards, Sass Guidelines
// and Sass Style Guide. Read more about these topics:
//
// @see https://www.drupal.org/docs/develop/standards/css/
// @see https://css-tricks.com/sass-style-guide/
// @see https://sass-guidelin.es
//
// This file is compiled separately so we can pull in config dependencies
// above while also maintaining Drupal's SMACSS structure.

/// Provide an easy way to include the `Track Focus` properties.
///
/// @link https://github.com/ten1seven/what-input
///   - A global utility for tracking the current input method.
///     (mouse, keyboard or touch)
///
/// @param {Bool} $extend [true]
///   - Choose either to '@extend' or to '@include', depending on whether
///     you want to group selectors or not.
///
/// @require {mixin} units.rem
/// @require {placeholder} track-focus-defaults

@mixin track-focus(
  $extend: true
) {

  @if $extend {
    @extend %track-focus-defaults;
  }
  @else {

    --track-focus-outline-width: #{units.rem(3px)};
    --track-focus-outline-offset: #{units.rem(2px)};
    --track-focus-outline-color: inherit;

    position: relative;
    outline: {
      width: var(--track-focus-outline-width);
      offset: var(--track-focus-outline-offset);
      color: var(--track-focus-outline-color);
      style: solid;
    }
    z-index: 999;
  }
}

/// Track Focus (What Input) JavaScript default properties.
///
/// @require {mixin} track-focus

%track-focus-defaults {
  @include track-focus($extend: false);
}

// Focusable elements
//
a,
button,
input,
select,
textarea,
[tabindex='0'] {

  // Focusable elements (Focus state)
  //
  &:focus {
    @include track-focus;

    // Focusable elements (Focus state / The mouse is being used indirectly)
    //
    // Only suppress the focus ring once `what-input` has successfully started.
    //
    [data-whatintent='mouse'] & {
      outline: none;
    }
  }
}

// Button (Type) elements
//
button,
[type='button'],
[type='reset'],
[type='submit'] {

  // Button (Type) elements (Mozilla Firefox specific focus ring)
  //
  &:-moz-focusring {
    @include track-focus($extend: false);
  }
}
